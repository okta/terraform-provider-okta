---
page_title: "Resource: okta_policy_rule_mfa"
description: |-
  Creates an MFA Policy Rule. This resource allows you to create and configure an MFA Policy Rule.
---

# Resource: okta_policy_rule_mfa

Creates an MFA Policy Rule. This resource allows you to create and configure an MFA Policy Rule.

## Example Usage

```terraform
data "okta_default_policy" "example" {
  type = "MFA_ENROLL"
}

resource "okta_policy_rule_mfa" "example" {
  policy_id = data.okta_default_policy.example.id
  name      = "My Rule"
  status    = "ACTIVE"
  enroll    = "LOGIN"
  app_include {
    id   = okta_app_oauth.example.id
    type = "APP"
  }
  app_include {
    type = "APP_TYPE"
    name = "yahoo_mail"
  }
}

resource "okta_app_oauth" "example" {
  label          = "My App"
  type           = "web"
  grant_types    = ["authorization_code"]
  redirect_uris  = ["http://localhost:8000"]
  response_types = ["code"]
}
### Unchecked `Okta` and checked `Applications` (with `Any application that supports MFA enrollment` option) checkboxes in the `User is accessing` section corresponds to the following config:

data "okta_default_policy" "example" {
  type = "MFA_ENROLL"
}

resource "okta_policy_rule_mfa" "example" {
  name      = "Some policy rule"
  policy_id = data.okta_default_policy.example.id

  app_exclude {
    name = "okta"
    type = "APP_TYPE"
  }
}

### Unchecked `Okta` and checked `Applications` (with `Specific applications` option) checkboxes in the `User is accessing` section corresponds to the following config:

data "okta_default_policy" "example" {
  type = "MFA_ENROLL"
}

resource "okta_policy_rule_mfa" "example" {
  name      = "Some policy rule"
  policy_id = data.okta_default_policy.example.id

  app_exclude {
    name = "okta"
    type = "APP_TYPE"
  }

  app_include {
    id   = "some_app_id"
    type = "APP"
  }
}

### Checked `Okta` and unchecked `Applications` checkboxes in the `User is accessing` section corresponds to the following config:

data "okta_default_policy" "example" {
  type = "MFA_ENROLL"
}

resource "okta_policy_rule_mfa" "example" {
  name      = "Some policy rule"
  policy_id = data.okta_default_policy.example.id

  app_include {
    name = "okta"
    type = "APP_TYPE"
  }
}

### Checked `Okta` and checked `Applications` (with `Any application that supports MFA enrollment` option) checkboxes in the `User is accessing` section corresponds to the following config:

data "okta_default_policy" "example" {
  type = "MFA_ENROLL"
}

resource "okta_policy_rule_mfa" "example" {
  name      = "Some policy rule"
  policy_id = data.okta_default_policy.example.id
}

### Checked `Okta` and checked `Applications` (with `Specific applications` option) checkboxes in the `User is accessing` section corresponds to the following config:

data "okta_default_policy" "example" {
  type = "MFA_ENROLL"
}

resource "okta_policy_rule_mfa" "example" {
  name      = "Some policy rule"
  policy_id = data.okta_default_policy.example.id

  app_include {
    name = "okta"
    type = "APP_TYPE"
  }

  app_include {
    id   = "some_app_id"
    type = "APP"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Policy Rule Name

### Optional

- `app_exclude` (Block Set) Applications to exclude in discovery rule. **IMPORTANT**: this field is only available in Classic Organizations.
	- 'id' - (Optional) Use if 'type' is 'APP' to indicate the application id to include.
	- 'name' - (Optional) Use if the 'type' is 'APP_TYPE' to indicate the type of application(s) to include in instances where an entire group (i.e. 'yahoo_mail') of applications should be included.
	- 'type' - (Required) One of: 'APP', 'APP_TYPE' (see [below for nested schema](#nestedblock--app_exclude))
- `app_include` (Block Set) Applications to include in discovery rule. **IMPORTANT**: this field is only available in Classic Organizations.
	- 'id' - (Optional) Use if 'type' is 'APP' to indicate the application id to include.
	- 'name' - (Optional) Use if the 'type' is 'APP_TYPE' to indicate the type of application(s) to include in instances where an entire group (i.e. 'yahoo_mail') of applications should be included.
	- 'type' - (Required) One of: 'APP', 'APP_TYPE' (see [below for nested schema](#nestedblock--app_include))
- `enroll` (String) When a user should be prompted for MFA. It can be `CHALLENGE`, `LOGIN`, or `NEVER`.
- `network_connection` (String) Network selection mode: `ANYWHERE`, `ZONE`, `ON_NETWORK`, or `OFF_NETWORK`. Default: `ANYWHERE`
- `network_excludes` (List of String) Required if `network_connection` = `ZONE`. Indicates the network zones to exclude.
- `network_includes` (List of String) Required if `network_connection` = `ZONE`. Indicates the network zones to include.
- `policy_id` (String) Policy ID of the Rule
- `priority` (Number) Rule priority. This attribute can be set to a valid priority. To avoid an endless diff situation an error is thrown if an invalid property is provided. The Okta API defaults to the last (lowest) if not provided.
- `status` (String) Policy Rule Status: `ACTIVE` or `INACTIVE`. Default: `ACTIVE`
- `users_excluded` (Set of String) Set of User IDs to Exclude

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--app_exclude"></a>
### Nested Schema for `app_exclude`

Required:

- `type` (String)

Optional:

- `name` (String)

Read-Only:

- `id` (String) The ID of this resource.


<a id="nestedblock--app_include"></a>
### Nested Schema for `app_include`

Required:

- `type` (String)

Optional:

- `name` (String)

Read-Only:

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

```shell
terraform import okta_policy_rule_mfa.example <policy_id>/<rule_id>
```
