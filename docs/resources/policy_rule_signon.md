---
page_title: "Resource: okta_policy_rule_signon"
description: |-
  Creates a Sign On Policy Rule. In case Invalid condition type specified: riskScore. error is thrown, set risc_level to an empty string, since this feature is not enabled.
---

# Resource: okta_policy_rule_signon

Creates a Sign On Policy Rule. In case `Invalid condition type specified: riskScore.` error is thrown, set `risc_level` to an empty string, since this feature is not enabled.

## Example Usage

```terraform
resource "okta_policy_signon" "test" {
  name        = "Example Policy"
  status      = "ACTIVE"
  description = "Example Policy"
}

data "okta_behavior" "new_city" {
  name = "New City"
}

resource "okta_policy_rule_signon" "example" {
  access             = "CHALLENGE"
  authtype           = "RADIUS"
  name               = "Example Policy Rule"
  network_connection = "ANYWHERE"
  policy_id          = okta_policy_signon.example.id
  status             = "ACTIVE"
  risc_level         = "HIGH"
  behaviors          = [data.okta_behavior.new_city.id]
  factor_sequence {
    primary_criteria_factor_type = "token:hotp" // TOTP
    primary_criteria_provider    = "CUSTOM"
    secondary_criteria {
      factor_type = "token:software:totp" // Okta Verify
      provider    = "OKTA"
    }
    secondary_criteria { // Okta Verify Push
      factor_type = "push"
      provider    = "OKTA"
    }
    secondary_criteria { // Password
      factor_type = "password"
      provider    = "OKTA"
    }
    secondary_criteria { // Security Question
      factor_type = "question"
      provider    = "OKTA"
    }
    secondary_criteria { // SMS
      factor_type = "sms"
      provider    = "OKTA"
    }
    secondary_criteria { // Google Auth
      factor_type = "token:software:totp"
      provider    = "GOOGLE"
    }
    secondary_criteria { // Email
      factor_type = "email"
      provider    = "OKTA"
    }
    secondary_criteria { // Voice Call
      factor_type = "call"
      provider    = "OKTA"
    }
    secondary_criteria { // FIDO2 (WebAuthn)
      factor_type = "webauthn"
      provider    = "FIDO"
    }
    secondary_criteria { // RSA
      factor_type = "token"
      provider    = "RSA"
    }
    secondary_criteria { // Symantec VIP
      factor_type = "token"
      provider    = "SYMANTEC"
    }
  }
  factor_sequence {
    primary_criteria_factor_type = "token:software:totp" // Okta Verify
    primary_criteria_provider    = "OKTA"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Policy Rule Name

### Optional

- `access` (String) Allow or deny access based on the rule conditions: `ALLOW`, `DENY` or `CHALLENGE`. Default: `ALLOW`
- `authtype` (String) Authentication entrypoint: `ANY`, `RADIUS` or `LDAP_INTERFACE`. Default: `ANY`
- `behaviors` (Set of String) List of behavior IDs
- `factor_sequence` (Block List) Auth factor sequences. Should be set if 'access = "CHALLENGE"'.
	- 'primary_criteria_provider' - (Required) Primary provider of the auth section.
	- 'primary_criteria_factor_type' - (Required) Primary factor type of the auth section.
	- 'secondary_criteria' - (Optional) Additional authentication steps.
	- 'provider' - (Required) Provider of the additional authentication step.
	- 'factor_type' - (Required) Factor type of the additional authentication step. (see [below for nested schema](#nestedblock--factor_sequence))
- `identity_provider` (String) Apply rule based on the IdP used: `ANY`, `OKTA` or `SPECIFIC_IDP`. Default: `ANY`. ~> **WARNING**: Use of `identity_provider` requires a feature flag to be enabled.
- `identity_provider_ids` (List of String) When identity_provider is `SPECIFIC_IDP` then this is the list of IdP IDs to apply the rule on
- `mfa_lifetime` (Number) Elapsed time before the next MFA challenge
- `mfa_prompt` (String) Prompt for MFA based on the device used, a factor session lifetime, or every sign-on attempt: `DEVICE`, `SESSION` or`ALWAYS`.
- `mfa_remember_device` (Boolean) Remember MFA device. Default: `false`
- `mfa_required` (Boolean) Require MFA. Default: `false`
- `network_connection` (String) Network selection mode: `ANYWHERE`, `ZONE`, `ON_NETWORK`, or `OFF_NETWORK`. Default: `ANYWHERE`
- `network_excludes` (List of String) Required if `network_connection` = `ZONE`. Indicates the network zones to exclude.
- `network_includes` (List of String) Required if `network_connection` = `ZONE`. Indicates the network zones to include.
- `policy_id` (String) Policy ID of the Rule
- `primary_factor` (String) Rule's primary factor. **WARNING** Ony works as a part of the Identity Engine. Valid values: `PASSWORD_IDP_ANY_FACTOR`, `PASSWORD_IDP`.
- `priority` (Number) Rule priority. This attribute can be set to a valid priority. To avoid an endless diff situation an error is thrown if an invalid property is provided. The Okta API defaults to the last (lowest) if not provided.
- `risc_level` (String, Deprecated) Risc level: ANY, LOW, MEDIUM or HIGH. Default: `ANY`
- `risk_level` (String) Risk level: ANY, LOW, MEDIUM or HIGH. Default: `ANY`
- `session_idle` (Number) Max minutes a session can be idle. Default: `120`
- `session_lifetime` (Number) Max minutes a session is active: Disable = 0. Default: `120`
- `session_persistent` (Boolean) Whether session cookies will last across browser sessions. Okta Administrators can never have persistent session cookies. Default: `false`
- `status` (String) Policy Rule Status: `ACTIVE` or `INACTIVE`. Default: `ACTIVE`
- `users_excluded` (Set of String) Set of User IDs to Exclude

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--factor_sequence"></a>
### Nested Schema for `factor_sequence`

Required:

- `primary_criteria_factor_type` (String) Type of a Factor
- `primary_criteria_provider` (String) Factor provider

Optional:

- `secondary_criteria` (Block List) (see [below for nested schema](#nestedblock--factor_sequence--secondary_criteria))

<a id="nestedblock--factor_sequence--secondary_criteria"></a>
### Nested Schema for `factor_sequence.secondary_criteria`

Required:

- `factor_type` (String) Type of a Factor
- `provider` (String) Factor provider

## Import

Import is supported using the following syntax:

```shell
terraform import okta_policy_rule_signon.example <policy_id>/<rule_id>
```
