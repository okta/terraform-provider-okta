---
page_title: "Resource: okta_app_group_assignments"
description: |-
  Assigns groups to an application. This resource allows you to create multiple App Group assignments.
  Important: Do not use `for_each` on this resource to iterate over groups for the same `app_id`. Use `dynamic` blocks inside a single resource instance instead.
---

# Resource: okta_app_group_assignments

Assigns groups to an application. This resource allows you to create multiple App Group assignments.

**Important**: Do not use `for_each` on this resource to iterate over groups for the same `app_id`. This resource's Read implementation fetches **all** groups currently assigned to the app from the Okta API — not just the ones declared in config. When multiple instances share the same `app_id`, the following infinite loop occurs on every apply:

1. Each instance's update deletes the groups it does not own from Okta.
2. Each instance's Read (called at the end of update) re-fetches all groups from the API and absorbs the other instance's groups back into state as drift.
3. State after apply is identical to state before apply — the plan never converges and the same diff reappears on every `terraform plan`.

Since this resource natively supports multiple `group` blocks, use a [`dynamic` block](https://developer.hashicorp.com/terraform/language/expressions/dynamic-blocks) instead:

**Bad** — creates two conflicting resource instances for the same app:
```terraform
resource "okta_app_group_assignments" "this" {
  for_each = toset(["group-a", "group-b"])
  app_id   = okta_app_bookmark.this.id
  group { id = each.value }
}
```

**Good** — a single resource instance manages all groups for the app:
```terraform
resource "okta_app_group_assignments" "this" {
  app_id = okta_app_bookmark.this.id
  dynamic "group" {
    for_each = toset(["group-a", "group-b"])
    content { id = group.value }
  }
}
```

> **Note:** Using `for_each` on this resource is safe when each instance targets a **different** `app_id`, for example when assigning the same group to multiple applications.

## Example Usage

```terraform
resource "okta_app_group_assignments" "example" {
  app_id = "<app id>"
  group {
    id       = "<group id>"
    priority = 1
  }
  group {
    id       = "<another group id>"
    priority = 2
    profile  = jsonencode({ "application profile field" : "application profile value" })
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_id` (String) The ID of the application to assign a group to.

### Optional

- `group` (Block List) A group to assign to this application (see [below for nested schema](#nestedblock--group))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--group"></a>
<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `read` (String)
- `update` (String)

### Nested Schema for `group`

Required:

- `id` (String) A group to associate with the application

Optional:

- `priority` (Number) Priority of group assignment
- `profile` (String) JSON document containing [application profile](https://developer.okta.com/docs/reference/api/apps/#profile-object)

## Import

Import is supported using the following syntax:

```shell
terraform import okta_app_group_assignments.example <app_id>
```
